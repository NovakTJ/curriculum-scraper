--- PAGE 1 ---
Septembar 2024. Copyright 2018-2024 by Dragan Milićev
❖ Ključna razlika i smisao uvođenja referenci na dvrednosti jeste u sledećem: kada 
argument poziva funkcije dvrednost, i ako su na raspolaganju dve preklopljene 
funkcije, jedna koja prima parametar koji je referenca na dvrednost (T&&) a druga 
koja prima referencu na konstantnu lvrednost (const T&), biće pozvana ona koja 
prima referencu na dvrednost; prema tome, ako postoji i konstruktor kopije i 
konstruktor pomeranja, odnosno operator dodele kopiranjem i premeštanjem, biće 
pozvan onaj za premeštanje
❖ Na primer:
T f (const T&); 
T f (T&&); 
T t; 
f(t); 
f(f(t)); 
f(std::move(t)); 
f (T());
Reference na dvrednosti
 395
Pošto je t lvrednost, poziva se T f(const T&)
Pošto je f(t) dvrednost, poziva se T f(T&&)
Pošto je std::move(t) vraća T&&, poziva se T f(T&&)
Pošto je T() dvrednost (čdvrednost), poziva se T f(T&&)

--- PAGE 2 ---
Septembar 2024. Copyright 2018-2024 by Dragan Milićev
❖ Konstruktor klase X čiji je prvi parametar tipa X&&, const X&&, volatile X&& ili const volatile X&&,  a 
koji ili nema druge parametre, ili svi ostali parametri imaju podrazumevane vrednosti, naziva se 
konstruktor premeštanja (move constructor)
❖ Ovaj konstruktor poziva se kada se objekat klase X inicijalizuje dvrednošću (do verzije C++17), odnosno 
xvrednošću (od verzije C++17) istog tipa, uključujući:
• inicijalizaciju objekta: X x1 = std::move(x2) ili X x1(std::move(x2)), gde je x2 objekat klase X ili iz nje 
izvedene klase
• prenos argumenta pri pozivu funkcije f(std::move(x)), koja ima taj parametar tipa X: void f(X x)
• povratak vrednosti iz funkcije f koja ima povratni tip X naredbom return x, gde je x objekat klase X 
ili iz nje izvedene klase
❖ Do verzije C++17, ako je inicijalizator čdvrednost (prvalue), poziv ovog konstruktora je bio najčešće 
izostavljan zbog optimizacije, dok je od verzije C++17 ta optimizacija obavezna, pa se konstruktor 
premeštanja nikada ne poziva za inicijalizaciju pomoću čdvrednosti (poziva se za inicijalizaciju samo 
pomoću xvrednosti)
❖ Svrha konstruktora premeštanja jeste da preotme (premesti) resurse iz objekta kojim se dati objekat 
domaćin inicijalizuje, ostavljajući taj objekat u validnom, konzistentnom stanju (barem tako da se on 
može ispravno uništiti)
Konstruktor premeštanja
 396
